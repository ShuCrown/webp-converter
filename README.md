# ğŸ–¼ï¸ WebP Converter

ä¸€ä¸ªç°ä»£åŒ–çš„å›¾ç‰‡æ ¼å¼è½¬æ¢å·¥å…·ï¼Œæ”¯æŒå°†å„ç§å›¾ç‰‡æ ¼å¼è½¬æ¢ä¸ºWebPæ ¼å¼ï¼Œæä¾›ä¼˜åŒ–çš„å‹ç¼©ç®—æ³•å’Œæ‰¹é‡å¤„ç†åŠŸèƒ½ã€‚

## âœ¨ ç‰¹æ€§

- ğŸš€ **å¿«é€Ÿè½¬æ¢** - åŸºäºFFmpegçš„é«˜æ€§èƒ½å›¾ç‰‡å¤„ç†
- ğŸ¯ **WebPä¼˜åŒ–** - æ™ºèƒ½å‹ç¼©ç®—æ³•ï¼Œä¿æŒå›¾ç‰‡è´¨é‡çš„åŒæ—¶å‡å°æ–‡ä»¶å¤§å°
- ğŸ“ **æ‰¹é‡å¤„ç†** - æ”¯æŒå¤šå¼ å›¾ç‰‡åŒæ—¶è½¬æ¢
- ğŸ“± **å“åº”å¼è®¾è®¡** - ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢ï¼Œæ”¯æŒç§»åŠ¨ç«¯
- ğŸ”„ **å®æ—¶è¿›åº¦** - Server-Sent Eventså®æ—¶æ¨é€è½¬æ¢è¿›åº¦
- ğŸ“¦ **æ‰¹é‡ä¸‹è½½** - æ”¯æŒæ‰“åŒ…ä¸‹è½½æ‰€æœ‰è½¬æ¢åçš„å›¾ç‰‡
- ğŸ³ **å®¹å™¨åŒ–éƒ¨ç½²** - å®Œæ•´çš„Dockeræ”¯æŒ

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**: React 19 + TypeScript + Vite + Tailwind CSS + Radix UI
- **åç«¯**: Bun + Elysia + TypeScript
- **å›¾ç‰‡å¤„ç†**: FFmpeg
- **æ„å»ºå·¥å…·**: pnpm workspaces + Docker
- **éƒ¨ç½²**: Docker Compose

### é¡¹ç›®ç»“æ„
```
webp-converter/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ api/          # åç«¯APIæœåŠ¡ (Bun + Elysia)
â”‚   â””â”€â”€ web/          # å‰ç«¯Webåº”ç”¨ (React + Vite)
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shared-utils/ # å…±äº«å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ shared-configs/ # å…±äº«é…ç½®å’Œè¯ä¹¦
â”œâ”€â”€ docker-compose.yml
â””â”€â”€ pnpm-workspace.yaml
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 18.0.0
- pnpm >= 8.0.0
- FFmpeg (ç”¨äºå›¾ç‰‡å¤„ç†)

### æœ¬åœ°å¼€å‘

1. **å®‰è£…ä¾èµ–**
   ```bash
   pnpm install
   ```

2. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   # åŒæ—¶å¯åŠ¨å‰ç«¯å’Œåç«¯
   pnpm dev
   
   # æˆ–è€…åˆ†åˆ«å¯åŠ¨
   pnpm dev:api  # å¯åŠ¨APIæœåŠ¡ (ç«¯å£: 4000)
   pnpm dev:web  # å¯åŠ¨Webåº”ç”¨ (ç«¯å£: 5173)
   ```

3. **è®¿é—®åº”ç”¨**
   - Webåº”ç”¨: http://localhost:5173
   - APIæ–‡æ¡£: http://localhost:4000/swagger

### Dockeréƒ¨ç½²

1. **æ„å»ºå’Œå¯åŠ¨**
   ```bash
   docker-compose up -d
   ```

2. **è®¿é—®æœåŠ¡**
   - Webåº”ç”¨: http://localhost:8880
   - APIæœåŠ¡: http://localhost:4000

## ğŸ“‹ APIæ–‡æ¡£

### å›¾ç‰‡è½¬æ¢æ¥å£

#### POST /api/compress
ä¸Šä¼ å¹¶è½¬æ¢å›¾ç‰‡åˆ°WebPæ ¼å¼

**è¯·æ±‚å‚æ•°:**
- `file` (File): å›¾ç‰‡æ–‡ä»¶ (æ”¯æŒ JPEG, PNG, GIF, WebP, BMP, TIFF)
- `key` (String): æ‰¹æ¬¡æ ‡è¯†ç¬¦

**å“åº”:**
```json
{
  "taskId": "uuid-string"
}
```

#### GET /api/progress/:taskId
è·å–è½¬æ¢è¿›åº¦ (Server-Sent Events)

**äº‹ä»¶ç±»å‹:**
- `progress`: è¿›åº¦æ›´æ–°
- `error`: é”™è¯¯ä¿¡æ¯

#### GET /api/download/:key/:filename
ä¸‹è½½è½¬æ¢åçš„æ–‡ä»¶

#### GET /api/download/zip/:key
æ‰“åŒ…ä¸‹è½½æ•´ä¸ªæ‰¹æ¬¡çš„æ‰€æœ‰æ–‡ä»¶

## ğŸ”§ é…ç½®

### æ”¯æŒçš„å›¾ç‰‡æ ¼å¼
- JPEG/JPG
- PNG
- GIF (æ”¯æŒåŠ¨ç”»)
- WebP
- BMP
- TIFF

### æ–‡ä»¶é™åˆ¶
- æœ€å¤§æ–‡ä»¶å¤§å°: 10MB
- æ”¯æŒæ‰¹é‡å¤„ç†å¤šå¼ å›¾ç‰‡

### ç¯å¢ƒå˜é‡
- `NODE_ENV`: è¿è¡Œç¯å¢ƒ (development/production)

## ğŸ§ª å¼€å‘æŒ‡å—

### ä»£ç ç»“æ„

#### å‰ç«¯ (apps/web)
```
src/
â”œâ”€â”€ components/     # Reactç»„ä»¶
â”œâ”€â”€ hooks/         # è‡ªå®šä¹‰Hook
â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”œâ”€â”€ types/         # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ assets/        # é™æ€èµ„æº
```

#### åç«¯ (apps/api)
```
src/
â”œâ”€â”€ routes/        # APIè·¯ç”±
â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”œâ”€â”€ middleware/    # ä¸­é—´ä»¶
â””â”€â”€ types/         # ç±»å‹å®šä¹‰
```

#### å…±äº«åŒ… (packages)
```
shared-utils/     # å·¥å…·å‡½æ•° (æ–‡ä»¶å¤„ç†ã€æ ¼å¼åŒ–ç­‰)
shared-configs/   # é…ç½®å’Œè¯ä¹¦
```

### å¼€å‘è§„èŒƒ

1. **TypeScript**: ä¸¥æ ¼æ¨¡å¼å¼€å¯ï¼Œç¡®ä¿ç±»å‹å®‰å…¨
2. **ä»£ç é£æ ¼**: ä½¿ç”¨ESLintè¿›è¡Œä»£ç æ£€æŸ¥
3. **æäº¤è§„èŒƒ**: éµå¾ªConventional Commits
4. **ç»„ä»¶è®¾è®¡**: ä½¿ç”¨Radix UIç»„ä»¶åº“ï¼Œä¿æŒä¸€è‡´çš„UIé£æ ¼

### æ„å»ºå’Œéƒ¨ç½²

```bash
# æ„å»ºæ‰€æœ‰åº”ç”¨
pnpm build

# ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
docker-compose -f docker-compose.yml up -d
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **FFmpegæœªå®‰è£…**
   - ç¡®ä¿ç³»ç»Ÿå·²å®‰è£…FFmpeg
   - Dockerç¯å¢ƒå·²åŒ…å«FFmpeg

2. **ç«¯å£å†²çª**
   - APIæœåŠ¡é»˜è®¤ç«¯å£: 4000
   - Webåº”ç”¨å¼€å‘ç«¯å£: 5173
   - Webåº”ç”¨ç”Ÿäº§ç«¯å£: 8880

3. **æ–‡ä»¶æƒé™é—®é¢˜**
   - ç¡®ä¿Dockerå·æŒ‚è½½è·¯å¾„æœ‰æ­£ç¡®çš„è¯»å†™æƒé™

## ğŸ¤ è´¡çŒ®

1. Forké¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»ºPull Request

## ğŸ“„ è®¸å¯è¯

ISC License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ†˜ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- åˆ›å»ºIssue
- å‘é€é‚®ä»¶

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ªStaræ”¯æŒä¸€ä¸‹ï¼**